{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>月次作業管理</h2>
        
        <form action="{% url 'create_monthly_batch' %}" method="post">
            {% csrf_token %}
            <button type="submit" class="btn btn-primary shadow-sm">
                今月の管理データを作成
            </button>
        </form>
    </div>

    <div class="list-group shadow-sm">
        {% for p in processes %}
        <a href="{% url 'monthly_detail' p.pk %}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center p-3">
            <div>
                <span class="fw-bold">{{ p.year_month|date:"Y年m月" }} の作業状況</span>
            </div>
            {% if p.is_completed %}
                <span class="badge bg-success rounded-pill">完了</span>
            {% else %}
                <span class="badge bg-danger rounded-pill">未完了</span>
            {% endif %}
        </a>
        {% empty %}
        <div class="list-group-item text-center text-muted p-5">
            まだ月次データがありません。右上のボタンから作成してください。
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}